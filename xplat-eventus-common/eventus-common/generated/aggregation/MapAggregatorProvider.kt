// <<< AUTOGENERATED BY YANDEX.SCRIPT FROM aggregation/map-aggregator-provider.ts >>>

package com.yandex.xplat.eventus.common

import com.yandex.xplat.common.*

public open class MapAggregatorProvider(private var aggregators: YSMap<String, Aggregator>): AggregatorProvider {
    var currentAggregator: Aggregator? = null
    open override fun getAggregator(): Aggregator {
        val current: Aggregator? = this.currentAggregator
        if (current == null) {
            return EmptyAggregator()
        } else {
            return current
        }
    }

    open override fun updateAggregator(event: EventusEvent): Boolean {
        val current: Aggregator? = this.currentAggregator
        if (current != null && current.accepts(event)) {
            return false
        } else {
            this.currentAggregator = undefinedToNull(this.aggregators.get(event.name))
            return true
        }
    }

}

