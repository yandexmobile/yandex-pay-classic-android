// <<< AUTOGENERATED BY YANDEX.SCRIPT FROM busilogics/check-luhn.ts >>>

package com.yandex.xplat.yandex.pay

import com.yandex.xplat.common.*
import com.yandex.xplat.eventus.common.*

public fun checkLuhn(digits: String): Boolean {
    var sum: Int = 0
    val start: Int = 0
    val finish: Int = digits.length
    for (i in (start until finish step 1)) {
        val digitOrNull = stringToInt32(digits.substr(i, 1))
        if (digitOrNull == null) {
            return false
        }
        var digit = digitOrNull!!
        if ((digits.length - i) % 2 == 0) {
            digit = digit * 2
            if (digit > 9) {
                digit = digit - 9
            }
        }
        sum += digit
    }
    return sum % 10 == 0
}

