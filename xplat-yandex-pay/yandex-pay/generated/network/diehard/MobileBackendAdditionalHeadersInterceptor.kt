// <<< AUTOGENERATED BY YANDEX.SCRIPT FROM network/diehard/mobile-backend-additional-headers-interceptor.ts >>>

package com.yandex.xplat.yandex.pay

import com.yandex.xplat.common.*
import com.yandex.xplat.eventus.common.*

public open class MobileBackendAdditionalHeadersInterceptor(private val forceCVV: Boolean): NetworkInterceptor {
    open override fun intercept(originalRequest: NetworkRequest): XPromise<NetworkRequest> {
        return resolve(SealedNetworkRequest(originalRequest.method(), originalRequest.targetPath(), originalRequest.params(), originalRequest.urlExtra(), this.updateHeadersExtra(originalRequest.headersExtra()), originalRequest.encoding()))
    }

    private fun updateHeadersExtra(headersExtra: NetworkHeadersExtra): NetworkHeadersExtra {
        val headers = headersExtra
        if (this.forceCVV) {
            headers.putInt32("X-SDK-Force-CVV", 1)
        }
        return headers
    }

}

